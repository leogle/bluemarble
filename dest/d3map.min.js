/*! /js/baidu-map-heat.js 2017-12-07 */
!function(){var a=require("d3");createProjection=function(b,c,d,e){var f=a.geoMercator().center(b).scale(c).translate(d,e);return f},lnglat2point=function(a,b){return a([b.lng,b.lat])},project2Point=function(a,b){for(var c=[],d=0;d<b.length;d++){var e=b[d],f=a([e.lng,e.lat]);c.push({x:f[0],y:f[1],count:e.count})}return c},flatData=function(a,b){for(var c=0;c<a.length;c++)pnpoly([a[c].x,a[c].y],b)||(a[c].count=-1)},flatDataLngLat=function(a,b){for(var c=0;c<a.length;c++)pnpoly([a[c].lng,a[c].lat],b)||(a[c].count=-1)},lnglat2pointArray=function(a,b){for(var c=[],d=0;d<b.length;d++){var e=b[d],f=a([e[0],e[1]]);c.push(f)}return c},halfData=function(a){for(var b=[],c=0;c<a.length;c+=2){var d=a[c];b.push(d)}return b},Array.prototype.min=function(){for(var a=this[0],b=this.length,c=1;b>c;c++)this[c]<a&&(a=this[c]);return a},Array.prototype.max=function(){for(var a=this[0],b=this.length,c=1;b>c;c++)this[c]>a&&(a=this[c]);return a}}(),function(){GeneralMap=function(a){var b={map:null,type:"baidu",mapTypes:["baidu","amap","tmap","google"],element:null};this.get=function(a){return b[a]},this.set=function(a,c){b[a]=c},this.init(a)},GeneralMap.prototype.init=function(a){var b=a.type;this.set("type",b),this.set("map",a.map)},GeneralMap.prototype.createCustomLayer=function(a){var b,c=this.get("type");return"baidu"===c?(b=new BMap.Overlay,b.option=a):"amap"===c?b=new AMap.CustomLayer(a):"tmap"===c&&(CustomOverlay=T.Overlay.extend({initialize:function(){}}),b=new CustomOverlay,b.option=a),b},GeneralMap.prototype.bindRender=function(a,b){var c=this.get("type");this.set("element",a.option);var d=this;"baidu"==c?(a.initialize=function(b){b.addEventListener("resize",function(b){var c=b.size;a.option.width=c.width,a.option.height=c.height,a.draw()}),b.getPanes().mapPane.appendChild(a.option)},a.draw=b,this.map().addOverlay(a)):"amap"==c?(a.render=b,a.setMap(this.map())):"tmap"==c&&(a.update=b,a.onAdd=function(a){var b=d.get("element");a.getPanes().overlayPane.appendChild(b)},this.map().addEventListener("moveend",function(b){a.update()}),this.map().addOverLay(a))},GeneralMap.prototype.getBounds=function(){var a,b,c,d=this.get("type"),e=this.get("map");return"baidu"===d?(a=e.getBounds(),b=a.getNorthEast(),c=a.getSouthWest(),{ne:{lng:b.lng,lat:b.lat},sw:{lng:c.lng,lat:c.lat}}):"amap"===d?(a=e.getBounds(),b=a.getNorthEast(),c=a.getSouthWest(),{ne:{lng:b.getLng(),lat:b.getLat()},sw:{lng:c.getLng(),lat:c.getLat()}}):"tmap"===d?(a=e.getBounds(),b=a.getNorthEast(),c=a.getSouthWest(),{ne:{lng:b.getLng(),lat:b.getLat()},sw:{lng:c.getLng(),lat:c.getLat()}}):void 0},GeneralMap.prototype.resize=function(){var a=this.get("type"),b=this.get("map"),c=this.get("element");if("baidu"==a){var d=b.getBounds(),e=b.pointToOverlayPixel(d.getNorthEast()),f=b.pointToOverlayPixel(d.getSouthWest()),g=e.y,h=f.x,i=f.y-e.y,j=e.x-f.x;c.style.left=h+"px",c.style.top=g+"px",c.style.width=j+"px",c.style.height=i+"px"}else if("amap"==a);else if("tmap"==a){var d=b.getBounds(),e=b.lngLatToLayerPoint(d.getNorthEast()),f=b.lngLatToLayerPoint(d.getSouthWest()),g=e.y,h=f.x,i=f.y-e.y,j=e.x-f.x;c.style.transform="translate("+Math.round(h)+"px,"+Math.round(g)+"px)",c.style.width=j+"px",c.style.height=i+"px"}},GeneralMap.prototype.lnglatToPoint=function(a){var b,c=this.get("type"),d=this.get("map");return"baidu"===c?(b=d.pointToPixel(new BMap.Point(a[0],a[1])),{x:b.x,y:b.y}):"amap"===c?(b=d.lnglatTocontainer(a),{x:b.getX(),y:b.getY()}):"tmap"===c?(b=d.lngLatToContainerPoint(new T.LngLat(a[0],a[1])),{x:b.x,y:b.y}):void 0},GeneralMap.prototype.getPixelDistance=function(a,b){var c=this.get("type"),d=this.get("map");if("baidu"===c){var e=new BMap.Point(a[0],a[1]),f=d.pointToPixel(e);f.x+=100;var g=d.pixelToPoint(f),h=d.getDistance(e,g);return 100*b/h}if("amap"==c){var i=d.getResolution(a);return b/i}},GeneralMap.prototype.getSize=function(){var a=this.get("type"),b=this.get("map");if("baidu"==a)return b.getSize();if("amap"==a){var c=b.getSize();return c}if("tmap"==a){var c=b.getSize();return{width:c.x,height:c.y}}},GeneralMap.prototype.map=function(){return this.get("map")}}(),function(){LayerBase=function(){var a={map:null};this.get=function(b){return a[b]},this.set=function(b,c){a[b]=c},this.configLayer=function(a){},this.configMap=function(a,b,c){this.set("map",b);var d=b.createCustomLayer(c.layerOption);return d.tag=a,b.bindRender(d,a.render),this.map=this.get("map").map(),d},this.resizeMap=function(){var a=this.get("map");a.resize()},this.render=function(){console.log("base render")}}}();